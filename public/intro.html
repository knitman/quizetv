<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Η ΓΝΩΣΗ ΕΙΝΑΙ ΝΙΚΗ – Έναρξη</title>
</head>

<body style="
  margin:0;
  background:#081c3a;
  color:gold;
  font-family:Arial, sans-serif;
  text-align:center;
">

  <h1 style="margin-top:30px;">Η ΓΝΩΣΗ ΕΙΝΑΙ ΝΙΚΗ</h1>
  <p>Σκάναρε το QR για να μπεις στο παιχνίδι</p>

  <img
    id="qr"
    alt="QR Code"
    style="width:220px;height:220px;margin:20px auto;display:block;"
  >

  <p id="players"></p>

  <button
    id="start"
    style="
      font-size:22px;
      padding:15px 40px;
      margin-top:20px;
      cursor:pointer;
    "
  >
    START GAME
  </button>

<script>
/* WebSocket σύνδεση */
const ws = new WebSocket(
  (location.protocol === "https:" ? "wss://" : "ws://") + location.host
);

/* Λήψη μηνυμάτων από server */
ws.onmessage = e => {
  const data = JSON.parse(e.data);

  /* QR code */
  if (data.type === "qr") {
    document.getElementById("qr").src = data.qr;
  }

  /* Λίστα παικτών (προαιρετικό feedback) */
  if (data.type === "players") {
    document.getElementById("players").textContent =
      "Παίκτες: " + data.players.map(p => p.name).join(", ");
  }
};

/* START GAME */
document.getElementById("start").onclick = () => {
  ws.send(JSON.stringify({ type: "admin_start" }));

  /* Μετάβαση στην TV οθόνη */
  setTimeout(() => {
    window.location.href = "/tv.html";
  }, 300);
};
</script>

</body>
</html>
